<?xml version="1.0" encoding="UTF-8"?>

<launch>
  <arg name="ekf_yaml" default="$(find-pkg-share zx120_bringup)/config/zx120_ekf.yaml" />
  <arg name="robot_name" default="" />
  <arg name="tf_prefix" default="$(var robot_name)" />

  <group>
	  <push-ros-namespace namespace="$(var robot_name)"/>
    <node pkg="zx120_bringup" name="poseStamped2Odometry" exec="poseStamped2Odometry.py"/>

    <node pkg="robot_localization" name="ekf_global" exec="ekf_node" output="screen">
      <param from="$(var ekf_yaml)"/>
      <param name="use_sim_time" value="false"/>
      <param name="tf_prefix" value="$(var tf_prefix)"/>
      <param name="odom_frame" value="$(var tf_prefix)/odom"/>
      <param name="base_link_frame" value="$(var tf_prefix)/base_link"/>
      <remap from="odometry/filtered" to="odometry/global"/>
      <remap from="odom0" to="odom2baselink"/>
      <remap from="odom1" to="gnss_odom"/>
    </node>
  </group>
</launch>
